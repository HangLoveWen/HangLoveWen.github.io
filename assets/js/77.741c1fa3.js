(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{474:function(e,p,s){"use strict";s.r(p);var v=s(2),r=Object(v.a)({},(function(){var e=this,p=e._self._c;return p("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[p("p",[e._v("1.路由的使用")]),e._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",[p("code",[e._v("1.最简单的用法\n")])])]),p("p",[e._v("在Express中使用路由最简单的方式，就是把路由挂载到app上，示例代码如下：")]),e._v(" "),p("p",[p("code",[e._v("const express=require('express')")])]),e._v(" "),p("p",[p("code",[e._v("const app=express()")])]),e._v(" "),p("p",[p("code",[e._v("app.use('/clock',express.static('./clock'))")])]),e._v(" "),p("p",[p("code",[e._v("app.get('/user/:id/:name',(req,res)=>{")])]),e._v(" "),p("p",[p("code",[e._v("// console.log(res.query)")])]),e._v(" "),p("p",[p("code",[e._v("// res.send(req.query)")])]),e._v(" "),p("p",[p("code",[e._v("res.send(req.params)")])]),e._v(" "),p("p",[p("code",[e._v("})")])]),e._v(" "),p("p",[p("code",[e._v("app.post('/user:id',(req,res)=>{")])]),e._v(" "),p("p",[p("code",[e._v("res.send('I am post')")])]),e._v(" "),p("p",[p("code",[e._v("})")])]),e._v(" "),p("p",[p("code",[e._v("app.listen(80,()=>{")])]),e._v(" "),p("p",[p("code",[e._v("console.log('server running at http://127.0.0.1')")])]),e._v(" "),p("p",[p("code",[e._v("})")])]),e._v(" "),p("p",[e._v("2.模块化路由")]),e._v(" "),p("p",[e._v("为了方便对路由进行模块化的处理，Express不建议将路由直接挂载到app上，而是推荐将路由抽离为单独的模块。将路由抽离为单独的模块的步骤如下：")]),e._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",[p("code",[e._v("1.创建路由模块对应的.js文件\n\n2.调用express.Router()函数创建路由对象\n\n3.向路由对象上挂载具体的路由\n\n4.使用modules.export向外共享路由对象\n\n5.使用app.use()函数注册路由模块\n")])])]),p("p",[e._v("3.创建路由模块")]),e._v(" "),p("p",[p("code",[e._v("//路由模块.js")])]),e._v(" "),p("p",[p("code",[e._v("const express=require('express')")])]),e._v(" "),p("p",[p("code",[e._v("const router=express.Router()")])]),e._v(" "),p("p",[p("code",[e._v("router.get('/user/:id/:name',(req,res)=>{")])]),e._v(" "),p("p",[p("code",[e._v("// console.log(res.query)")])]),e._v(" "),p("p",[p("code",[e._v("// res.send(req.query)")])]),e._v(" "),p("p",[p("code",[e._v("res.send(req.params)")])]),e._v(" "),p("p",[p("code",[e._v("})")])]),e._v(" "),p("p",[p("code",[e._v("router.post('/user:id',(req,res)=>{")])]),e._v(" "),p("p",[p("code",[e._v("res.send('I am post')")])]),e._v(" "),p("p",[p("code",[e._v("})")])]),e._v(" "),p("p",[p("code",[e._v("module.exports=router")])]),e._v(" "),p("p",[p("code",[e._v("//服务器注册路由")])]),e._v(" "),p("p",[p("code",[e._v("const express=require('express')")])]),e._v(" "),p("p",[p("code",[e._v("const router=require('./路由模块')")])]),e._v(" "),p("p",[p("code",[e._v("const app=express()")])]),e._v(" "),p("p",[p("code",[e._v("app.use(router)")])]),e._v(" "),p("p",[p("code",[e._v("app.listen(80,()=>{")])]),e._v(" "),p("p",[p("code",[e._v("console.log('server running on https://127.0.0.1')")])]),e._v(" "),p("p",[p("code",[e._v("})")])]),e._v(" "),p("p",[e._v("注意:")]),e._v(" "),p("p",[e._v("app.use()函数的作用，就是用来注册全局中间件")]),e._v(" "),p("p",[e._v("4.注册路由模块")]),e._v(" "),p("p",[p("code",[e._v("const router=require('./路由模块')")])]),e._v(" "),p("p",[p("code",[e._v("app.use(router)")])]),e._v(" "),p("p",[e._v("5.为路由模块添加前缀")]),e._v(" "),p("p",[e._v("类似于托管静态资源时，为静态资源统一挂载访问前缀一样，路由模块添加前缀的方式也非常简单：")]),e._v(" "),p("p",[p("code",[e._v("const router=require('./路由模块')")])]),e._v(" "),p("p",[p("code",[e._v("app.use('/api',router)")])])])}),[],!1,null,null,null);p.default=r.exports}}]);